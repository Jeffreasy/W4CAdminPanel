(()=>{var e={};e.id=857,e.ids=[857],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4583:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>i});var t=r(482),a=r(9108),l=r(2563),o=r.n(l),n=r(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let i=["",{children:["dashboard",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,467)),"C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\dashboard\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3096)),"C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1342)),"C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\dashboard\\orders\\page.tsx"],x="/dashboard/orders/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/orders/page",pathname:"/dashboard/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},7329:(e,s,r)=>{Promise.resolve().then(r.bind(r,5230))},5230:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(5344),a=r(3729),l=r(8428),o=r(5814),n=r(7435),d=r(7509),i=r(4669);function c(){let{user:e,isLoading:s}=(0,o.a)(),r=(0,l.useRouter)(),c=(0,n.createClientComponentClient)(),[x,m]=(0,a.useState)([]),[u,p]=(0,a.useState)(!0),[h,g]=(0,a.useState)(null),[b,y]=(0,a.useState)("all"),[j,f]=(0,a.useState)("created_at"),[v,N]=(0,a.useState)("desc"),[w,_]=(0,a.useState)(""),[C,k]=(0,a.useState)(null),[S,P]=(0,a.useState)(null),[M,q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{async function s(){try{p(!0),g(null);let e=c.from("orders").select("*");"all"!==b&&(e=e.eq("status",b)),e=e.order(j,{ascending:"asc"===v});let{data:s,error:r}=await e;if(r)throw r;m(s||[])}catch(e){console.error("Error fetching orders:",e),g(e.message||"Failed to load orders"),i.Am.error("Failed to load orders")}finally{p(!1)}}e&&s()},[e,c,b,j,v]);let A=e=>{e===j?N("asc"===v?"desc":"asc"):(f(e),N("desc"))};async function W(e,s){try{k(e);let{error:r}=await c.from("orders").update({status:s,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r;m(x.map(r=>r.id===e?{...r,status:s,updated_at:new Date().toISOString()}:r)),i.Am.success(`Order status updated to ${s}`)}catch(e){console.error("Error updating order status:",e),i.Am.error("Failed to update order status: "+e.message)}finally{k(null)}}let L=e=>{P(e),q(!0)},D=()=>{q(!1),setTimeout(()=>P(null),300)},I=(0,a.useMemo)(()=>{if(!w.trim())return x;let e=w.toLowerCase();return x.filter(s=>s.order_number.toLowerCase().includes(e)||`${s.customer_first_name} ${s.customer_last_name}`.toLowerCase().includes(e)||s.customer_email.toLowerCase().includes(e))},[x,w]);return s?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[80vh]",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-t-blue-500 border-gray-700 rounded-full animate-spin mb-4"}),t.jsx("p",{className:"text-gray-300 text-lg",children:"Checking authentication..."})]}):e?(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300",children:"Orders Management"}),t.jsx("button",{onClick:()=>r.push("/dashboard"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-white text-sm transition-colors shadow-md hover:shadow-lg hover:-translate-y-0.5 transform duration-200",children:"Back to Dashboard"})]}),h&&t.jsx("div",{className:"bg-red-500/10 border border-red-500/30 p-4 rounded-lg text-red-400 animate-pulse",children:h}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-[1fr_auto] gap-4 bg-gray-800/50 p-4 rounded-lg border border-gray-700/50 shadow-md",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx("input",{type:"text",value:w,onChange:e=>_(e.target.value),placeholder:"Search by order #, customer name or email...",className:"w-full px-4 py-2 pl-10 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500/50"}),t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),t.jsx("div",{className:"w-full sm:w-auto",children:(0,t.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[t.jsx("option",{value:"all",children:"All Statuses"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"paid",children:"Paid"}),t.jsx("option",{value:"shipped",children:"Shipped"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]}),u?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-t-blue-500 border-gray-700 rounded-full animate-spin mb-4"}),t.jsx("p",{className:"ml-3 text-xl text-gray-300",children:"Loading orders..."})]}):0===I.length?(0,t.jsxs)("div",{className:"bg-gray-800/80 p-8 rounded-xl shadow-lg text-center border border-gray-700/50",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),t.jsx("h3",{className:"text-xl font-medium text-gray-300 mb-2",children:"No orders found"}),t.jsx("p",{className:"text-gray-400",children:w||"all"!==b?"Try adjusting your search or filter criteria.":"New orders will appear here."}),(w||"all"!==b)&&t.jsx("button",{onClick:()=>{_(""),y("all")},className:"mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm transition-colors",children:"Clear Filters"})]}):(0,t.jsxs)("div",{className:"bg-gray-800/80 rounded-xl shadow-lg overflow-hidden border border-gray-700/50",children:[t.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:t.jsx("div",{className:"min-w-[768px] px-4 sm:px-0",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"text-left bg-gray-700/50",children:[t.jsx("th",{className:"px-4 py-3 cursor-pointer hover:bg-gray-700/80 transition-colors text-xs sm:text-sm",onClick:()=>A("order_number"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Order Number","order_number"===j&&t.jsx("span",{className:"ml-1",children:"asc"===v?"↑":"↓"})]})}),t.jsx("th",{className:"px-4 py-3 cursor-pointer hover:bg-gray-700/80 transition-colors text-xs sm:text-sm",onClick:()=>A("customer_last_name"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Customer","customer_last_name"===j&&t.jsx("span",{className:"ml-1",children:"asc"===v?"↑":"↓"})]})}),t.jsx("th",{className:"px-4 py-3 cursor-pointer hover:bg-gray-700/80 transition-colors text-xs sm:text-sm",onClick:()=>A("created_at"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Date","created_at"===j&&t.jsx("span",{className:"ml-1",children:"asc"===v?"↑":"↓"})]})}),t.jsx("th",{className:"px-4 py-3 cursor-pointer hover:bg-gray-700/80 transition-colors text-xs sm:text-sm",onClick:()=>A("total_amount"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Amount","total_amount"===j&&t.jsx("span",{className:"ml-1",children:"asc"===v?"↑":"↓"})]})}),t.jsx("th",{className:"px-4 py-3 text-xs sm:text-sm",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-xs sm:text-sm",children:"Email"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs sm:text-sm",children:"Actions"})]})}),t.jsx("tbody",{children:I.map(e=>(0,t.jsxs)("tr",{className:"border-t border-gray-700/30 hover:bg-gray-700/20 transition-colors",children:[(0,t.jsxs)("td",{className:"px-4 py-3 font-medium text-white text-xs sm:text-sm",children:["#",e.order_number]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-xs sm:text-sm",children:[(0,t.jsxs)("div",{className:"font-medium cursor-pointer hover:text-blue-400 transition-colors flex items-center gap-1",onClick:()=>L(e),children:[e.customer_first_name," ",e.customer_last_name,t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),t.jsx("div",{className:"text-[10px] sm:text-xs text-gray-400 mt-1 truncate max-w-[150px] sm:max-w-none",children:e.customer_email})]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-gray-300 text-xs sm:text-sm whitespace-nowrap",children:[(0,d.WU)(new Date(e.created_at),"MMM dd, yyyy"),t.jsx("div",{className:"text-[10px] text-gray-500 sm:hidden",children:(0,d.WU)(new Date(e.created_at),"HH:mm")})]}),(0,t.jsxs)("td",{className:"px-4 py-3 font-medium text-amber-500 text-xs sm:text-sm whitespace-nowrap",children:["€",Number(e.total_amount).toFixed(2)]}),t.jsx("td",{className:"px-4 py-3 text-xs sm:text-sm",children:t.jsx("span",{className:`px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium ${"paid"===e.status?"bg-green-500/20 text-green-400 border border-green-500/30":"shipped"===e.status?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"completed"===e.status?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"cancelled"===e.status?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),t.jsx("td",{className:"px-4 py-3 text-xs sm:text-sm",children:t.jsx("span",{className:`px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium ${e.emails_sent?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:e.emails_sent?"Sent":"Not Sent"})}),t.jsx("td",{className:"px-4 py-3 text-right whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[t.jsx("button",{onClick:()=>r.push(`/dashboard/orders/${e.id}`),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-[10px] sm:text-xs transition-colors shadow-sm hover:shadow-md",children:"View"}),(0,t.jsxs)("select",{value:e.status,onChange:s=>W(e.id,s.target.value),disabled:C===e.id,className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-[10px] sm:text-xs focus:outline-none focus:ring-2 focus:ring-blue-500/50 cursor-pointer",children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"paid",children:"Paid"}),t.jsx("option",{value:"shipped",children:"Shipped"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})})]},e.id))})]})})}),(0,t.jsxs)("div",{className:"mt-3 pb-2 flex justify-center sm:hidden",children:[t.jsx("div",{className:"w-16 h-1 bg-gray-700 rounded-full relative overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 bg-blue-500/50 animate-pulse rounded-full"})}),t.jsx("span",{className:"sr-only",children:"Scroll horizontally to see more"})]})]}),M&&S&&t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:D,children:(0,t.jsxs)("div",{className:`bg-gray-800 rounded-xl max-w-md w-full shadow-2xl border border-gray-700 transform transition-all duration-300 ${M?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-700 p-4",children:[t.jsx("h3",{className:"text-xl font-medium text-white",children:"Customer Details"}),t.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"p-5 space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Name"}),(0,t.jsxs)("p",{className:"font-medium",children:[S.customer_first_name," ",S.customer_last_name]})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Email"}),t.jsx("p",{className:"font-medium break-all",children:S.customer_email})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Address"}),t.jsx("p",{className:"font-medium",children:S.customer_address}),(0,t.jsxs)("p",{children:[S.customer_postal_code,", ",S.customer_city]}),t.jsx("p",{children:S.customer_country})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Order Number"}),(0,t.jsxs)("p",{className:"font-medium",children:["#",S.order_number]})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Order Date"}),t.jsx("p",{className:"font-medium",children:(0,d.WU)(new Date(S.created_at),"MMMM dd, yyyy HH:mm")})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Order Status"}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium inline-block ${"paid"===S.status?"bg-green-500/20 text-green-400 border border-green-500/30":"shipped"===S.status?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"completed"===S.status?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"cancelled"===S.status?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-700 p-4 flex justify-end space-x-3",children:[t.jsx("button",{onClick:D,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white transition-colors",children:"Close"}),t.jsx("button",{onClick:()=>{D(),r.push(`/dashboard/orders/${S.id}`)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors",children:"View Order"})]})]})})]}):(r.push("/login"),null)}},467:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>o});let t=(0,r(6843).createProxy)(String.raw`C:\Users\jeffrey\Desktop\MAIN WHISKY\W4CAdminPanel\src\app\dashboard\orders\page.tsx`),{__esModule:a,$$typeof:l}=t,o=t.default}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[22,964,763,509,294],()=>r(4583));module.exports=t})();