(()=>{var e={};e.id=56,e.ids=[56],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4258:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(482),a=t(9108),o=t(2563),i=t.n(o),n=t(8300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d=["",{children:["dashboard",{children:["products",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5846)),"C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\dashboard\\products\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3096)),"C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\jeffrey\\Desktop\\MAIN WHISKY\\W4CAdminPanel\\src\\app\\dashboard\\products\\new\\page.tsx"],u="/dashboard/products/new/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/products/new/page",pathname:"/dashboard/products/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6732:(e,r,t)=>{Promise.resolve().then(t.bind(t,6991))},6991:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var s=t(5344),a=t(3729),o=t(8428),i=t(5814),n=t(7435),l=t(5305),d=t(6113);let c={randomUUID:d.randomUUID},u=new Uint8Array(256),p=u.length,m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1));let x=function(e,r,t){if(c.randomUUID&&!r&&!e)return c.randomUUID();let s=(e=e||{}).random??e.rng?.()??(p>u.length-16&&((0,d.randomFillSync)(u),p=0),u.slice(p,p+=16));if(s.length<16)throw Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,r){if((t=t||0)<0||t+16>r.length)throw RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[t+e]=s[e];return r}return function(e,r=0){return(m[e[r+0]]+m[e[r+1]]+m[e[r+2]]+m[e[r+3]]+"-"+m[e[r+4]]+m[e[r+5]]+"-"+m[e[r+6]]+m[e[r+7]]+"-"+m[e[r+8]]+m[e[r+9]]+"-"+m[e[r+10]]+m[e[r+11]]+m[e[r+12]]+m[e[r+13]]+m[e[r+14]]+m[e[r+15]]).toLowerCase()}(s)};var g=t(4669);function h(){let{user:e,isLoading:r}=(0,i.a)(),t=(0,o.useRouter)(),d=(0,n.createClientComponentClient)(),[c,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(""),[w,N]=(0,a.useState)("1"),[k,C]=(0,a.useState)(!0),[P,q]=(0,a.useState)(""),[A,S]=(0,a.useState)([]),_=async e=>{e.preventDefault();try{if(m(!0),u(null),!h.trim())throw Error("Product name is required");if(!f.trim())throw Error("Description is required");if(!v||0>=parseFloat(v))throw Error("Price must be greater than zero");if(!w||0>parseInt(w))throw Error("Stock cannot be negative");if(!P.trim())throw Error("Main image is required");let e={id:x(),name:h,description:f,price:parseFloat(v),stock:parseInt(w),is_active:k,image:P,cloudinary_id:P,images:[P,...A.filter(e=>e)],created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:r}=await d.from("products").insert([e]);if(r)throw r;g.Am.success("Product created successfully"),t.push("/dashboard/products")}catch(e){console.error("Error creating product:",e),u(e.message||"Failed to create product"),g.Am.error(e.message||"Failed to create product"),m(!1)}},I=e=>{S(A.filter(r=>r!==e)),g.Am.success("Image removed")},M=(0,a.useCallback)(e=>{q(e.public_id),g.Am.success("Main image uploaded successfully")},[]),U=(0,a.useCallback)(e=>{let r=e.public_id;S(e=>[...e,r]),g.Am.success("Additional image uploaded successfully")},[]),D=e=>{P&&P!==e&&S(r=>[...r.filter(r=>r!==e),P]),q(e),S(r=>r.filter(r=>r!==e)),g.Am.success("Main image updated")};return r?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[80vh]",children:[s.jsx("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-xl text-gray-300",children:"Checking authentication..."})]}):e?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300",children:"Add New Product"}),s.jsx("button",{onClick:()=>t.push("/dashboard/products"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-white text-sm transition-colors shadow-md hover:shadow-lg hover:-translate-y-0.5 transform duration-200",children:"Back to Products"})]}),c&&s.jsx("div",{className:"bg-red-500/10 border border-red-500/30 p-4 rounded-lg text-red-400 animate-pulse",children:c}),s.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl shadow-lg border border-gray-700/50",children:(0,s.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name"}),s.jsx("input",{type:"text",value:h,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"Enter product name",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx("textarea",{value:f,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500/50 min-h-[150px]",placeholder:"Describe your product",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (â‚¬)"}),s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"0.00",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stock"}),s.jsx("input",{type:"number",min:"0",value:w,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"1",required:!0})]})]}),s.jsx("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer select-none",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:e=>C(e.target.checked),className:"w-4 h-4 bg-gray-700 border-gray-600 rounded focus:ring-blue-500 text-blue-600 focus:ring-offset-gray-800"}),s.jsx("span",{children:"Active (visible in shop)"})]})})]}),s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-3",children:"Main Product Image"}),P?(0,s.jsxs)("div",{className:"relative rounded-lg overflow-hidden border-2 border-gray-700 h-64 group bg-gray-900/50",children:[s.jsx(l.bz,{src:P,alt:"Main product image",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-contain transition-transform duration-300 group-hover:scale-105 p-2"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 flex items-center justify-center group-hover:bg-opacity-50 transition-all duration-300",children:(0,s.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex space-x-2",children:[s.jsx(l.ZF,{uploadPreset:"product_images",onSuccess:e=>{e.info&&M(e.info)},children:({open:e})=>s.jsx("button",{type:"button",onClick:()=>e(),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm",children:"Replace"})}),s.jsx("button",{type:"button",onClick:()=>q(""),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",children:"Remove"})]})})]}):s.jsx(l.ZF,{uploadPreset:"product_images",onSuccess:e=>{e.info&&M(e.info)},children:({open:e})=>(0,s.jsxs)("button",{type:"button",onClick:()=>e(),className:"w-full h-64 border-2 border-dashed border-gray-600 rounded-lg flex flex-col items-center justify-center bg-gray-700/30 hover:bg-gray-700/50 transition-colors duration-200",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Upload main product image"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Click to browse"})]})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Additional Images"}),s.jsx(l.ZF,{uploadPreset:"product_images",onSuccess:e=>{e.info&&U(e.info)},children:({open:e})=>s.jsx("button",{type:"button",onClick:()=>e(),className:"text-xs px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Add Image"})})]}),A.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-3",children:A.map((e,r)=>(0,s.jsxs)("div",{className:"relative group rounded-lg overflow-hidden border border-gray-700 h-24 bg-gray-900/50",children:[s.jsx(l.bz,{src:e,alt:`Additional image ${r+1}`,fill:!0,sizes:"(max-width: 768px) 33vw, 100px",className:"object-contain transition-all duration-200 group-hover:opacity-80 p-1"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 flex items-center justify-center group-hover:bg-opacity-50 transition-all duration-300",children:(0,s.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex space-x-1",children:[s.jsx("button",{type:"button",onClick:()=>D(e),className:"px-2 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-xs",children:"Set Main"}),s.jsx("button",{type:"button",onClick:()=>I(e),className:"px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-xs",children:"Remove"})]})})]},r))}):s.jsx("div",{className:"text-center bg-gray-800/50 p-4 rounded-lg border border-gray-700/50",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"No additional images"})})]})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-700 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>t.push("/dashboard/products"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white transition-colors shadow-md",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Product..."]}):"Create Product"})]})]})})]}):(t.push("/login"),null)}},5846:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>a,default:()=>i});let s=(0,t(6843).createProxy)(String.raw`C:\Users\jeffrey\Desktop\MAIN WHISKY\W4CAdminPanel\src\app\dashboard\products\new\page.tsx`),{__esModule:a,$$typeof:o}=s,i=s.default}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[22,964,763,305,294],()=>t(4258));module.exports=s})();