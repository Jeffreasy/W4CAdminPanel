(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6334:function(e,t,r){Promise.resolve().then(r.bind(r,378))},378:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r(3827),a=r(4090),o=r(3779),n=r(7907),l=r(3696),i=r(8792);function c(){let[e,t]=(0,a.useState)(""),[r,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(null),[m,f]=(0,a.useState)(!1),{user:h,signIn:x}=(0,o.a)(),g=(0,n.useRouter)(),p=(0,a.useRef)(null),y=(0,a.useRef)(null),b=(0,a.useRef)(null),[w,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{v(!0)},[]),(0,a.useEffect)(()=>{if(w&&h){let e=setTimeout(()=>{g.push("/dashboard")},100);return()=>clearTimeout(e)}},[w,h,g]),(0,a.useEffect)(()=>{if(!w||h)return;let e=l.ZP.timeline({defaults:{ease:"power3.out"}});y.current&&b.current&&e.fromTo(y.current,{scale:0,opacity:0},{scale:1,opacity:1,duration:.8}).fromTo(b.current,{y:-20,opacity:0},{y:0,opacity:1,duration:.6},"-=0.4").fromTo(".form-field",{y:20,opacity:0},{y:0,opacity:1,stagger:.15,duration:.6},"-=0.3").fromTo(".login-btn",{y:20,opacity:0},{y:0,opacity:1,duration:.6},"-=0.2")},[w,h]);let j=async t=>{if(t.preventDefault(),!e||!r){d("Please enter both email and password"),N();return}try{d(null),f(!0),w&&l.ZP.to(".login-btn",{scale:.95,duration:.2,yoyo:!0,repeat:1}),await x(e,r)}catch(e){console.error("Login error:",e),d(e.message||"Invalid email or password"),N()}finally{f(!1)}},N=()=>{w&&p.current&&l.ZP.fromTo(p.current,{x:-10},{x:0,duration:.1,repeat:3,yoyo:!0})};return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center px-4",children:[(0,s.jsx)("div",{ref:y,className:"mb-6 w-20 h-20 rounded-full bg-gradient-to-tr from-amber-500 to-orange-600 flex items-center justify-center shadow-lg ".concat(w?"":"opacity-0"),children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"W4C"})}),(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-8 rounded-2xl shadow-xl border border-gray-700/50",children:[(0,s.jsx)("h1",{ref:b,className:"text-2xl font-bold text-center mb-8 bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300 ".concat(w?"":"opacity-0"),children:"Admin Login"}),u&&(0,s.jsx)("div",{className:"bg-red-500/10 text-red-400 p-4 rounded-lg mb-6 border border-red-500/30 animate-pulse",children:u}),(0,s.jsxs)("form",{ref:p,onSubmit:j,className:"space-y-5",children:[(0,s.jsxs)("div",{className:"form-field ".concat(w?"":"opacity-0"),children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-2 text-sm font-medium",htmlFor:"email",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-3 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-white",placeholder:"your@email.com"})]})]}),(0,s.jsxs)("div",{className:"form-field ".concat(w?"":"opacity-0"),children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-2 text-sm font-medium",htmlFor:"password",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,s.jsx)("input",{id:"password",type:"password",value:r,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-3 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-white",placeholder:"••••••••"})]})]}),(0,s.jsx)("button",{type:"submit",disabled:m,className:"login-btn w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-blue-700/30 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-70 disabled:cursor-not-allowed ".concat(w?"":"opacity-0"),children:m?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"})]})]}),(0,s.jsxs)("div",{className:"text-center mt-6 text-gray-500 text-sm",children:[(0,s.jsx)(i.default,{href:"/",className:"hover:text-white transition-colors",children:"Return to Website"}),(0,s.jsx)("p",{className:"mt-2",children:"Whisky For Charity Admin Portal"})]})]})]})}},3779:function(e,t,r){"use strict";r.d(t,{H:function(){return i},a:function(){return c}});var s=r(3827),a=r(4090),o=r(7907),n=r(8714);let l=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),d=(0,o.useRouter)(),m=(0,n.createClientComponentClient)();(0,a.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await m.auth.getUser();i(e)}catch(e){console.error("Error getting user:",e)}finally{u(!1)}})();let{data:{subscription:e}}=m.auth.onAuthStateChange((e,t)=>{var r;i(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),u(!1)});return()=>{e.unsubscribe()}},[m,d]);let f=async(e,t)=>{try{let{data:r,error:s}=await m.auth.signInWithPassword({email:e,password:t});if(s)throw s;i(r.user);let{data:{session:a}}=await m.auth.getSession();(null==a?void 0:a.user)&&d.push("/dashboard")}catch(e){throw console.error("Sign in error:",e),e}},h=async()=>{await m.auth.signOut(),d.push("/"),d.refresh()};return(0,s.jsx)(l.Provider,{value:{user:r,isLoading:c,signIn:f,signOut:h},children:t})},c=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[922,676,714,696,792,971,69,744],function(){return e(e.s=6334)}),_N_E=e.O()}]);