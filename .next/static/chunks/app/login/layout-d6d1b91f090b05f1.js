(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[988],{7342:function(t,e,r){Promise.resolve().then(r.bind(r,666))},666:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return a}});var n=r(3827);r(4090);var u=r(3779);function a(t){let{children:e}=t;return(0,n.jsx)(u.H,{children:e})}},3779:function(t,e,r){"use strict";r.d(e,{H:function(){return o},a:function(){return l}});var n=r(3827),u=r(4090),a=r(7907),s=r(8714);let i=(0,u.createContext)(void 0),o=t=>{let{children:e}=t,[r,o]=(0,u.useState)(null),[l,c]=(0,u.useState)(!0),h=(0,a.useRouter)(),d=(0,s.createClientComponentClient)();(0,u.useEffect)(()=>{(async()=>{try{let{data:{user:t}}=await d.auth.getUser();o(t)}catch(t){console.error("Error getting user:",t)}finally{c(!1)}})();let{data:{subscription:t}}=d.auth.onAuthStateChange((t,e)=>{var r;o(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null),c(!1)});return()=>{t.unsubscribe()}},[d,h]);let f=async(t,e)=>{try{let{data:r,error:n}=await d.auth.signInWithPassword({email:t,password:e});if(n)throw n;o(r.user);let{data:{session:u}}=await d.auth.getSession();(null==u?void 0:u.user)&&h.push("/dashboard")}catch(t){throw console.error("Sign in error:",t),t}},v=async()=>{await d.auth.signOut(),h.push("/"),h.refresh()};return(0,n.jsx)(i.Provider,{value:{user:r,isLoading:l,signIn:f,signOut:v},children:e})},l=()=>{let t=(0,u.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}}},function(t){t.O(0,[676,714,971,69,744],function(){return t(t.s=7342)}),_N_E=t.O()}]);